(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{5070:function(e,s,a){Promise.resolve().then(a.bind(a,2930))},2930:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return UserDetailPage}});var l=a(7437),r=a(2265);a(1396);var t=a(4033),n=a(1841),i=a(5491),c=a(746),d=a(9144),m=a(5193),o=a(3080),x=a(9348),h=a(2648),u=a(7760);function UserDetailPage(){let{id:e}=(0,t.useParams)(),[s,a]=(0,r.useState)(null),[j,f]=(0,r.useState)(null),[p,g]=(0,r.useState)(!0),[v,N]=(0,r.useState)(null),[y,w]=(0,r.useState)(!1),[b,k]=(0,r.useState)({name:"",email:""}),[C,U]=(0,r.useState)({}),[L,E]=(0,r.useState)(!1),{addToast:z}=(0,x.useToast)();(0,r.useEffect)(()=>{fetchUser()},[e]);let fetchUser=async()=>{try{g(!0);let s=await n.B.getUserById(e);a(s),f({...s}),k({name:s.name||"",email:s.email||""}),N(null)}catch(e){N("Failed to fetch user. Please try again later."),console.error("Error fetching user:",e),z({message:"Failed to fetch user. Please try again.",type:"error"})}finally{g(!1)}},handleUpdate=async s=>{if(s.preventDefault(),validate())try{let s=await n.B.updateUser(e,b);a(s),f({...s}),w(!1),z({message:"User updated successfully!",type:"success"})}catch(e){N("Failed to update user. Please try again."),console.error("Error updating user:",e),z({message:"Failed to update user. Please try again.",type:"error"})}},handleDelete=async()=>{try{await n.B.deleteUser(e),z({message:"User deleted successfully!",type:"success"}),window.location.href="/users"}catch(e){N("Failed to delete user. Please try again."),console.error("Error deleting user:",e),z({message:"Failed to delete user. Please try again.",type:"error"})}finally{E(!1)}},handleChange=e=>{let{name:s,value:a}=e.target;k(e=>({...e,[s]:a})),C[s]&&U(e=>({...e,[s]:""}))},validate=()=>{let e={};return b.name.trim()||(e.name="Name is required"),b.email.trim()?/^\S+@\S+\.\S+$/.test(b.email)||(e.email="Email is invalid"):e.email="Email is required",U(e),0===Object.keys(e).length};return p?(0,l.jsx)(u.Z,{children:(0,l.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,l.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Details"}),(0,l.jsx)("p",{className:"text-gray-600 mt-2",children:"Loading user information..."})]}),(0,l.jsx)(i.Zb,{children:(0,l.jsx)(i.aY,{className:"p-6",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)(o.o,{className:"h-6 w-1/4 rounded"}),(0,l.jsx)(o.o,{className:"h-4 w-full rounded"}),(0,l.jsx)(o.o,{className:"h-4 w-3/4 rounded"}),(0,l.jsx)(o.o,{className:"h-4 w-1/2 rounded"})]})})})]})})}):v?(0,l.jsx)(u.Z,{children:(0,l.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,l.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Details"}),(0,l.jsx)("p",{className:"text-gray-600 mt-2",children:"Error loading user information"})]}),(0,l.jsx)(i.Zb,{children:(0,l.jsx)(i.aY,{className:"p-6",children:(0,l.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,l.jsx)("div",{className:"text-red-600 mb-2",children:(0,l.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,l.jsx)("h3",{className:"text-lg font-medium text-red-800 mb-1",children:"Error loading user"}),(0,l.jsx)("p",{className:"text-red-600",children:v}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)(c.z,{onClick:fetchUser,variant:"outline",children:"Try Again"})})]})})})]})})}):(0,l.jsx)(u.Z,{children:(0,l.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,l.jsxs)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:y?"Edit User":"User Details"}),(0,l.jsx)("p",{className:"text-gray-600 mt-2",children:y?"Update user information":"View and manage user details"})]}),(0,l.jsxs)(i.Zb,{children:[(0,l.jsx)(i.Ol,{children:(0,l.jsx)(i.ll,{children:y?"Edit User Information":"User Information"})}),(0,l.jsxs)(i.aY,{children:[v&&(0,l.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("svg",{className:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,l.jsx)("div",{className:"ml-3",children:(0,l.jsx)("h3",{className:"text-sm font-medium text-red-800",children:v})})]})}),y?(0,l.jsxs)("form",{onSubmit:handleUpdate,className:"space-y-6",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(m._,{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:"Full Name"}),(0,l.jsx)(d.I,{id:"name",name:"name",value:b.name,onChange:handleChange,placeholder:"Enter full name",className:"".concat(C.name?"border-red-500":"border-gray-300")}),C.name&&(0,l.jsxs)("p",{className:"text-red-500 text-sm flex items-center mt-1",children:[(0,l.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),C.name]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsx)(m._,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"Email Address"}),(0,l.jsx)(d.I,{id:"email",name:"email",type:"email",value:b.email,onChange:handleChange,placeholder:"Enter email address",className:"".concat(C.email?"border-red-500":"border-gray-300")}),C.email&&(0,l.jsxs)("p",{className:"text-red-500 text-sm flex items-center mt-1",children:[(0,l.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),C.email]})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3 pt-2",children:[(0,l.jsxs)(c.z,{type:"submit",className:"flex-1 flex items-center justify-center",children:[(0,l.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Update User"]}),(0,l.jsx)(c.z,{type:"button",variant:"outline",onClick:()=>{k({name:j.name||"",email:j.email||""}),w(!1),U({})},className:"flex-1",children:"Cancel"})]})]}):(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center mb-6",children:[(0,l.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-blue-600 text-xl font-medium",children:null==s?void 0:s.name.charAt(0).toUpperCase()})}),(0,l.jsxs)("div",{className:"ml-4",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:null==s?void 0:s.name}),(0,l.jsx)("p",{className:"text-gray-500",children:"User"})]})]}),(0,l.jsxs)("div",{className:"space-y-4 mb-8",children:[(0,l.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:(0,l.jsxs)("div",{children:[(0,l.jsx)(m._,{className:"text-sm font-medium text-gray-500",children:"ID"}),(0,l.jsx)("p",{className:"text-gray-900 break-all font-mono text-sm bg-gray-50 p-2 rounded mt-1",children:null==s?void 0:s.id})]})}),(0,l.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:(0,l.jsxs)("div",{children:[(0,l.jsx)(m._,{className:"text-sm font-medium text-gray-500",children:"Name"}),(0,l.jsx)("p",{className:"text-gray-900 text-lg font-medium",children:null==s?void 0:s.name})]})}),(0,l.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:(0,l.jsxs)("div",{children:[(0,l.jsx)(m._,{className:"text-sm font-medium text-gray-500",children:"Email"}),(0,l.jsx)("p",{className:"text-gray-900",children:null==s?void 0:s.email})]})}),(0,l.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:(0,l.jsxs)("div",{children:[(0,l.jsx)(m._,{className:"text-sm font-medium text-gray-500",children:"Created At"}),(0,l.jsx)("p",{className:"text-gray-900",children:(null==s?void 0:s.createdAt)?new Date(s.createdAt).toLocaleString():""})]})})]}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[(0,l.jsxs)(c.z,{onClick:()=>{w(!0)},className:"flex-1 flex items-center justify-center",children:[(0,l.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit User"]}),(0,l.jsxs)(c.z,{variant:"destructive",onClick:()=>E(!0),className:"flex-1 flex items-center justify-center",children:[(0,l.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete User"]})]})]})]})]})]}),L&&(0,l.jsxs)(h.u,{isOpen:L,onClose:()=>E(!1),title:"Confirm Delete",children:[(0,l.jsxs)("p",{className:"mb-6",children:["Are you sure you want to delete user ",(0,l.jsx)("strong",{children:null==s?void 0:s.name}),"? This action cannot be undone."]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,l.jsx)(c.z,{variant:"outline",onClick:()=>E(!1),children:"Cancel"}),(0,l.jsx)(c.z,{variant:"destructive",onClick:handleDelete,children:"Delete"})]})]})]})})}},5193:function(e,s,a){"use strict";a.d(s,{_:function(){return n}});var l=a(7437),r=a(2265),t=a(3889);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,l.jsx)("label",{ref:s,className:(0,t.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...r})});n.displayName="Label"}},function(e){e.O(0,[932,194,971,472,744],function(){return e(e.s=5070)}),_N_E=e.O()}]);