(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240],{2131:function(e,s,r){Promise.resolve().then(r.bind(r,9045))},9045:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return UsersPage}});var t=r(7437),a=r(2265),l=r(1396),n=r.n(l),i=r(1841),c=r(5491),o=r(746),d=r(9144),m=r(3889);let Search=e=>{let{placeholder:s,value:r,onChange:a,className:l,...n}=e;return(0,t.jsxs)("div",{className:(0,m.cn)("relative",l),children:[(0,t.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-gray-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})}),(0,t.jsx)(d.I,{type:"text",placeholder:s,value:r,onChange:a,className:"pl-10 w-full",...n})]})};var x=r(3080),h=r(9348),u=r(2648),j=r(7760);function UsersPage(){let[e,s]=(0,a.useState)([]),[r,l]=(0,a.useState)([]),[d,m]=(0,a.useState)(!0),[g,f]=(0,a.useState)(null),[v,p]=(0,a.useState)(""),[w,N]=(0,a.useState)(!1),[y,k]=(0,a.useState)(null),{addToast:b}=(0,h.useToast)();(0,a.useEffect)(()=>{fetchUsers()},[]),(0,a.useEffect)(()=>{if(v){let s=e.filter(e=>e.name.toLowerCase().includes(v.toLowerCase())||e.email.toLowerCase().includes(v.toLowerCase()));l(s)}else l(e)},[v,e]);let fetchUsers=async()=>{try{m(!0);let e=await i.B.getAllUsers();s(e),l(e),f(null)}catch(e){f("Failed to fetch users. Please try again later."),console.error("Error fetching users:",e),b({message:"Failed to fetch users. Please try again.",type:"error"})}finally{m(!1)}},confirmDelete=e=>{k(e),N(!0)},handleDelete=async()=>{if(y)try{await i.B.deleteUser(y.id),fetchUsers(),b({message:"User deleted successfully!",type:"success"})}catch(e){f("Failed to delete user. Please try again."),console.error("Error deleting user:",e),b({message:"Failed to delete user. Please try again.",type:"error"})}finally{N(!1),k(null)}},formatDate=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(0,t.jsx)(j.Z,{children:(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Users"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your users"})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[(0,t.jsx)("div",{className:"flex-1 max-w-md",children:(0,t.jsx)(Search,{placeholder:"Search users...",value:v,onChange:e=>p(e.target.value)})}),(0,t.jsx)(n(),{href:"/users/create",children:(0,t.jsx)(o.z,{className:"px-4 py-2",children:(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add User"]})})})]}),d?(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,s)=>(0,t.jsx)(c.Zb,{className:"p-6",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(x.o,{className:"h-5 w-3/4"}),(0,t.jsx)(x.o,{className:"h-4 w-1/2"}),(0,t.jsx)(x.o,{className:"h-4 w-2/3"}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2 pt-2",children:[(0,t.jsx)(x.o,{className:"h-8 w-16"}),(0,t.jsx)(x.o,{className:"h-8 w-16"})]})]})},s))}):g?(0,t.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,t.jsx)("div",{className:"text-red-600 mb-2",children:(0,t.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-red-800 mb-1",children:"Error loading users"}),(0,t.jsx)("p",{className:"text-red-600",children:g}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(o.z,{onClick:fetchUsers,variant:"outline",children:"Try Again"})})]}):0===r.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[(0,t.jsx)("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:(0,t.jsx)("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})})}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"No users yet"}),(0,t.jsx)("p",{className:"text-gray-500 mb-6",children:"Get started by creating your first user"}),(0,t.jsx)(n(),{href:"/users/create",children:(0,t.jsx)(o.z,{className:"px-6 py-3",children:(0,t.jsxs)("span",{className:"flex items-center",children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create your first user"]})})})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(e=>(0,t.jsx)(c.Zb,{className:"hover:shadow-lg transition-shadow duration-200 overflow-hidden",children:(0,t.jsxs)(c.aY,{className:"p-6",children:[(0,t.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-blue-600 text-sm font-medium",children:e.name.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{className:"ml-3",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"User"})]})]})}),(0,t.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),e.email]}),(0,t.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,t.jsx)("svg",{className:"w-4 h-4 mr-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Joined ",formatDate(e.createdAt)]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(n(),{href:"/users/".concat(e.id),children:(0,t.jsx)(o.z,{variant:"outline",size:"sm",className:"px-3 py-1.5",children:"Edit"})}),(0,t.jsx)(o.z,{variant:"destructive",size:"sm",className:"px-3 py-1.5",onClick:()=>confirmDelete(e),children:"Delete"})]})]})},e.id))})]}),w&&(0,t.jsxs)(u.u,{isOpen:w,onClose:()=>N(!1),title:"Confirm Delete",children:[(0,t.jsxs)("p",{className:"mb-6",children:["Are you sure you want to delete user ",(0,t.jsx)("strong",{children:null==y?void 0:y.name}),"? This action cannot be undone."]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,t.jsx)(o.z,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),(0,t.jsx)(o.z,{variant:"destructive",onClick:handleDelete,children:"Delete"})]})]})]})})}}},function(e){e.O(0,[932,194,971,472,744],function(){return e(e.s=2131)}),_N_E=e.O()}]);